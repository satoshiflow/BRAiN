# ============================================================================
# BRAiN Backend - Complete Requirements (v0.3.0)
# ============================================================================
# Updated: 2024-12-19
# Purpose: Complete dependency list with pinned versions for reproducibility
# ============================================================================

# --- Core FastAPI + Server ---
fastapi==0.109.2
uvicorn[standard]==0.27.1
python-multipart==0.0.9        # Required for FastAPI file uploads and form data

# --- ASGI / Web Server ---
starlette==0.36.3               # ASGI framework (FastAPI dependency)
websockets==12.0                # WebSocket support

# --- Database ---
sqlalchemy[asyncio]==2.0.27     # ORM with async support
asyncpg==0.29.0                 # Async PostgreSQL driver
alembic==1.13.3                 # Database migrations (required by cognee>=1.13.3)

# --- Redis ---
redis[hiredis]==5.0.1           # Redis client with hiredis for performance

# --- Pydantic (Data Validation) ---
pydantic==2.6.1
pydantic-settings==2.1.0

# --- HTTP Client ---
httpx>=0.24,<0.26               # Async HTTP client (for LLM API calls, compatible with supabase)

# --- Payment Processing ---
stripe==8.0.0                   # Stripe payment gateway SDK (PayCore module)

# --- Environment ---
python-dotenv==1.0.1

# --- Logging ---
loguru==0.7.2
python-json-logger==2.0.7

# --- Cryptography & Authentication ---
cryptography==42.0.2                # Ed25519 signatures for bundle signing (G1)
python-jose[cryptography]==3.3.0    # JWT token encoding/decoding
passlib[bcrypt]==1.7.4              # Password hashing (bcrypt)

# --- Background Jobs / Scheduling ---
APScheduler==3.10.4             # Background task scheduling

# --- CLI Tools (Optional) ---
typer==0.9.0                    # CLI interface for brain_cli
rich==13.7.0                    # Beautiful terminal output

# --- Optional: Supabase Integration ---
supabase==2.3.4                 # Supabase client (for agent repository)

# --- Optional: Vector DB & Knowledge Graphs ---
qdrant-client==1.7.3            # Qdrant vector database client
cognee==0.5.1                   # Knowledge graph + vector memory platform (PoC Phase 1)

# --- Development / Testing ---
pytest==8.0.1
pytest-asyncio==0.23.5
pytest-cov==4.1.0
pytest-httpx==0.30.0            # Mock HTTP requests in tests (provides httpx_mock fixture)

# --- Code Quality (Development) ---
black==24.2.0                   # Code formatter
ruff==0.2.2                     # Fast Python linter
mypy==1.8.0                     # Static type checker

# --- Type Stubs ---
types-redis==4.6.0.20240218

# ============================================================================
# Optional Dependencies (Uncomment if needed)
# ============================================================================

# --- LLM Provider Integrations ---
# openai==1.12.0                # OpenAI API client
# anthropic==0.18.1             # Anthropic Claude API
# litellm==1.30.0               # Multi-provider LLM gateway

# --- Advanced Features ---
# celery[redis]==5.3.6          # Distributed task queue
# flower==2.0.1                 # Celery monitoring
prometheus-client==0.20.0       # Metrics export (ENABLED for Grafana)

# ============================================================================
# Notes:
# - All versions are pinned for reproducibility
# - Run `pip install -r requirements.txt` to install
# - For development: `pip install -r requirements.txt -r requirements-dev.txt`
# - Update versions: `pip list --outdated` then test thoroughly
# ============================================================================
