# Upstream Definitions
# Define all backend services for different environments

# ============================================
# Development Environment (Port 800x, 300x)
# ============================================
upstream brain_backend_dev {
    server localhost:8001;
    keepalive 32;
}

upstream brain_frontend_dev {
    server localhost:3001;
    keepalive 32;
}

upstream brain_axe_dev {
    server localhost:3002;
    keepalive 32;
}

# ============================================
# Staging Environment (Port 800x, 300x)
# ============================================
upstream brain_backend_stage {
    server localhost:8002;
    keepalive 32;
}

upstream brain_frontend_stage {
    server localhost:3003;
    keepalive 32;
}

upstream brain_axe_stage {
    server localhost:3004;
    keepalive 32;
}

# ============================================
# Production Environment (Port 8000, 3000)
# ============================================
# Note: Production uses Docker service names
upstream brain_backend_prod {
    server brain-api:8000;
    keepalive 32;
}

upstream brain_frontend_prod {
    server brain-control-deck:3000;
    keepalive 32;
}

# ============================================
# Open WebUI (Port 8080)
# ============================================
upstream openwebui_backend {
    server openwebui:8080;
    keepalive 32;
}
