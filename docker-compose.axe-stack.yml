version: '3.8'

services:
  ollama-qwen:
    image: ollama/ollama:latest
    container_name: ollama-qwen
    networks:
      - coolify
    volumes:
      - ollama-data:/root/.ollama
    restart: unless-stopped
    # Keine Ports exposed - nur intern über Docker Netzwerk erreichbar

  axellm:
    build:
      context: ./services/axellm
      dockerfile: Dockerfile
    container_name: axellm
    networks:
      - coolify
    environment:
      - OLLAMA_BASE_URL=http://ollama-qwen:11434
      - DEFAULT_MODEL=qwen:0.5b
      - REQUEST_TIMEOUT_SECONDS=60
    depends_on:
      - ollama-qwen
    restart: unless-stopped
    # Keine Ports exposed - nur intern über Docker Netzwerk erreichbar

networks:
  coolify:
    external: true
    name: coolify

volumes:
  ollama-data:
    driver: local
